import{c as l}from"./cartStore-v6FvFEc3.js";import{_ as g,m as d,a as x,g as c,o as n,c as a,h,i as u,b as t,F as _,r as w,t as s,d as y}from"./index-COv797LT.js";import{S as p}from"./sweetalert2.all-0L7EvcLS.js";var L={VITE_API_URL:"https://vue3-course-api.hexschool.io/v2",VITE_API_PATH:"iris831206",BASE_URL:"/vue-sample-week6/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_API_URL:m,VITE_API_PATH:b}=L,I={data(){return{order:{user:{}},orderId:""}},methods:{randomValue(){this.value=Math.random()*this.max},...d(l,["addToCart"]),...d(l,["getCart"]),getOrder(){const i=`${m}/api/${b}/order/${this.orderId}`;this.isLoading=!0,this.$http.get(i).then(o=>{this.order=o.data.order,this.isLoading=!1}).catch(o=>{this.isLoading=!1,p.fire({icon:"error",title:o.response.data.message,showConfirmButton:!1,timer:1500})})},payOrder(){const i=`${m}/api/${b}/pay/${this.orderId}`;this.isLoading=!0,this.$http.post(i).then(()=>{this.isLoading=!1,this.getOrder()}).catch(o=>{this.isLoading=!1,p.fire({icon:"error",title:o.response.data.message,showConfirmButton:!1,timer:1500})})}},computed:{...x(l,["carts","total","final_total"])},mounted(){this.orderId=this.$route.params.orderId,this.getOrder()}},V=t("div",{class:"loadingio-spinner-ellipsis-tyhni0y6d0m"},[t("div",{class:"ldio-vxrwqxfvut"},[t("div"),t("div"),t("div"),t("div"),t("div")])],-1),T={class:"bg-light pt-5 pb-7"},E={class:"container"},k={class:"row justify-content-center flex-md-row flex-column-reverse"},A={class:"col-md-6"},P=t("div",{class:"position-relative m-4"},[t("div",{class:"progress",role:"progressbar","aria-label":"Progress","aria-valuenow":"50","aria-valuemin":"0","aria-valuemax":"100",style:{height:"1px"}},[t("div",{class:"progress-bar",style:{width:"100%"}})]),t("button",{type:"button",class:"position-absolute top-0 start-0 translate-middle btn btn-sm btn-primary rounded-pill",style:{width:"2rem",height:"2rem"}},"1"),t("button",{type:"button",class:"position-absolute top-0 start-50 translate-middle btn btn-sm btn-primary rounded-pill",style:{width:"2rem",height:"2rem"}},"2"),t("button",{type:"button",class:"position-absolute top-0 start-100 translate-middle btn btn-sm btn-primary rounded-pill",style:{width:"2rem",height:"2rem"}},"3")],-1),S={class:"bg-white p-4"},$={class:"border p-4 mb-4"},C=t("h4",{class:"mb-4"},"訂單明細",-1),R=["src","alt"],j={class:"w-100"},B={class:"d-flex justify-content-between fw-bold"},O={class:"mb-0"},U={class:"mb-0"},D={class:"d-flex justify-content-between"},N={class:"text-muted mb-0"},q={class:"mb-0"},F=t("table",{class:"table mt-4 border-top border-bottom text-muted"},[t("tbody",null,[t("tr",null,[t("th",{scope:"row",class:"border-0 px-0 pt-4 font-weight-normal text-end"},"總計")])])],-1),H={class:"d-flex justify-content-between mt-4"},M=t("p",{class:"mb-0 h4 fw-bold"},"Total",-1),z={class:"mb-0 h4 fw-bold"},G=t("h4",{class:"fw-bold mb-2"},"收件資訊",-1),J={class:"table"},K=t("th",{width:"100"},"Email",-1),Q=t("th",null,"姓名",-1),W=t("th",null,"收件人電話",-1),X=t("th",null,"收件人地址",-1),Y=t("tr",null,null,-1),Z=t("p",{class:"text-end text-success fs-5 fw-bold"},"已完成訂購",-1),tt={class:"d-flex flex-column-reverse flex-md-row mt-4 justify-content-between align-items-md-center align-items-end"},st=t("i",{class:"fas fa-chevron-left me-2"},null,-1);function et(i,o,ot,rt,r,it){const f=c("VueLoading"),v=c("RouterLink");return n(),a(_,null,[h(f,{active:i.isLoading},{default:u(()=>[V]),_:1},8,["active"]),t("div",T,[t("div",E,[t("div",k,[t("div",A,[P,t("div",S,[t("div",$,[C,(n(!0),a(_,null,w(r.order.products,e=>(n(),a("div",{class:"d-flex mt-3",key:e.id},[t("img",{src:e.product.imageUrl,alt:e.product.title,class:"me-2",style:{width:"48px",height:"48px","object-fit":"cover"}},null,8,R),t("div",j,[t("div",B,[t("p",O,s(e.product.title),1),t("p",U,"x"+s(e.qty)+"/"+s(e.product.unit),1)]),t("div",D,[t("p",N,[t("small",null,s(e.product.price)+"/"+s(e.product.unit),1)]),t("p",q,"小計 "+s(e.final_total)+" 元",1)])])]))),128)),F,t("div",H,[M,t("p",z,"NT$"+s(r.order.total),1)])]),G,t("table",J,[t("tbody",null,[t("tr",null,[K,t("td",null,s(r.order.user.email),1)]),t("tr",null,[Q,t("td",null,s(r.order.user.name),1)]),t("tr",null,[W,t("td",null,s(r.order.user.tel),1)]),t("tr",null,[X,t("td",null,s(r.order.user.address),1)]),Y])]),Z]),t("div",tt,[h(v,{to:"/products",class:"text-dark mt-md-0 mt-3 text-decoration-none"},{default:u(()=>[st,y("繼續購物 ")]),_:1})])])])])])],64)}const dt=g(I,[["render",et]]);export{dt as default};
