import{P as k}from"./PaginationComponents-_qdm_It9.js";import{c as P}from"./cartStore-v6FvFEc3.js";import{_ as w,l as C,m as I,g as l,o as e,c as o,h as c,i as _,b as t,F as p,r as m,d as r,t as n,e as v}from"./index-COv797LT.js";import{S as L}from"./sweetalert2.all-0L7EvcLS.js";var E={VITE_API_URL:"https://vue3-course-api.hexschool.io/v2",VITE_API_PATH:"iris831206",BASE_URL:"/vue-sample-week6/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_API_URL:V,VITE_API_PATH:T}=E,A={data(){return{products:[],isLoading:!1,status:{loadingItem:""},pagination:{},currentPage:1,categories:["香氛","保濕","潔淨"]}},methods:{getData(d=1){this.currentPage=d;const{category:u=""}=this.$route.query;this.isLoading=!0;const g=`${V}/api/${T}/products?category=${u}&page=${d}`;C.get(g).then(i=>{this.products=i.data.products,this.pagination=i.data.pagination,this.isLoading=!1}).catch(i=>{this.isLoading=!1,L.fire({icon:"error",title:i.response.data.message,showConfirmButton:!1,timer:1500})})},getProduct(d){this.$router.push(`product/${d}`)},...I(P,["addToCart"])},components:{PaginationComponents:k},watch:{"$route.query":{handler(){this.getData()},deep:!0}},mounted(){this.getData()}},D=t("div",{class:"loadingio-spinner-ellipsis-tyhni0y6d0m"},[t("div",{class:"ldio-vxrwqxfvut"},[t("div"),t("div"),t("div"),t("div"),t("div")])],-1),$={class:"container mt-md-5 mt-3 mb-7"},R={class:"row"},S={class:"col-md-3"},O={class:"accordion border border-bottom border-top-0 border-start-0 border-end-0 mb-3 sticky-top",id:"accordionExample"},j={class:"card border-0"},B=t("div",{class:"card-header px-0 py-4 bg-white border border-bottom-0 border-top border-start-0 border-end-0 rounded-0",id:"headingOne","data-bs-toggle":"collapse","data-bs-target":"#collapseOne"},[t("div",{class:"d-flex justify-content-between align-items-center pe-1"},[t("h4",{class:"mb-0"}," 商品種類 "),t("i",{class:"fas fa-chevron-down"})])],-1),N={id:"collapseOne",class:"collapse show","aria-labelledby":"headingOne","data-bs-parent":"#accordionExample"},U={class:"card-body py-0"},q={class:"list-unstyled"},F={class:"col-md-9"},H={class:"row"},M={class:"card border-0 mb- position-relative position-relative mx-2 h-100"},z=["src","alt"],G={class:"card-body p-0"},J={class:"mt-3"},K={class:"card-text text-muted mb-0"},Q={class:"mb-0"},W={class:"badge bg-success"},X={class:"mb-0"},Y={class:"card-text mb-2 d-flex justify-content-end align-items-end"},Z={key:0},tt={class:"mb-0 h5"},st={key:1},et={class:"mb-0 text-secondary"},ot={class:"mb-0 h5"},at={class:"card-footer bg-transparent border-dark"},nt={class:"d-grid gap-2 d-lg-block d-lg-flex justify-content-lg-between"},dt=["disabled","onClick"],it={key:0,class:"spinner-border spinner-grow-sm"},ct=["onClick","disabled"],rt={key:0,class:"spinner-border spinner-grow-sm"},lt={class:"d-flex justify-content-center"};function _t(d,u,g,i,a,h){const f=l("VueLoading"),b=l("RouterLink"),y=l("PaginationComponents");return e(),o(p,null,[c(f,{active:a.isLoading},{default:_(()=>[D]),_:1},8,["active"]),t("div",$,[t("div",R,[t("div",S,[t("div",O,[t("div",j,[B,t("div",N,[t("div",U,[t("ul",q,[t("li",null,[c(b,{to:"/products",class:"py-2 d-block text-muted text-decoration-none"},{default:_(()=>[r(" 全部 ")]),_:1})]),(e(!0),o(p,null,m(a.categories,s=>(e(),o("li",{key:s},[c(b,{to:`/products?category=${s}`,class:"py-2 d-block text-muted text-decoration-none"},{default:_(()=>[r(n(s),1)]),_:2},1032,["to"])]))),128))])])])])])]),t("div",F,[t("div",H,[(e(!0),o(p,null,m(a.products,s=>(e(),o("div",{class:"col-lg-4 mb-5",key:s.id},[t("div",M,[t("img",{src:s.imageUrl,class:"card-img-top rounded-0",alt:s.title,style:{"object-fit":"cover"}},null,8,z),t("div",G,[t("div",J,[t("div",K,[t("h4",Q,n(s.title),1),t("span",W,n(s.category),1),t("p",X,n(s.description),1)])])]),t("div",Y,[s.origin_price===s.price?(e(),o("div",Z,[t("p",tt,"$"+n(s.price)+" 元",1)])):(e(),o("div",st,[t("p",et,[t("del",null,"$"+n(s.origin_price)+" 元",1)]),t("p",ot,"$"+n(s.price)+" 元",1)]))]),t("div",at,[t("div",nt,[t("button",{type:"button",class:"btn btn-outline-secondary",disabled:a.status.loadingItem===s.id||!s.is_enabled,onClick:x=>h.getProduct(s.id)},[a.status.loadingItem===s.id?(e(),o("span",it)):v("",!0),r(" 查看更多 ")],8,dt),t("button",{type:"button",class:"btn btn-outline-danger",onClick:x=>d.addToCart(s.id),disabled:a.status.loadingItem===s.id||!s.is_enabled},[a.status.loadingItem===s.id?(e(),o("span",rt)):v("",!0),r(" 加到購物車 ")],8,ct)])])])]))),128))]),t("nav",lt,[c(y,{pages:a.pagination,onEmitPages:h.getData},null,8,["pages","onEmitPages"])])])])])],64)}const bt=w(A,[["render",_t]]);export{bt as default};
